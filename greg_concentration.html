<!DOCTYPE HTML>
<html>
<head>
<!--
	COP2822.0M1
	Module 10

	Author: Matthew Metzger
	Date: 11/23/2016

	File name: play_21.html
	Supporting files: greg.css
-->
<meta charset="UTF-8">
<meta name="description" content="Card Game of 21">
<title>Greg's Gambits | Greg's Concentration</title>
	<link href="greg.css" rel="stylesheet" type="text/css" />
<script>
var firstCell = "";
var secondCell = "";
var firstCellId = "";
var secondCellId = "";
var turnCount = 0;
var matchCount = 0;
var picArray = new Array(
		["<img src='images/picC.jpg' />", "<img src='images/picE.jpg' />", "<img src='images/picE.jpg' />", "<img src='images/picD.jpg' />"],
		["<img src='images/picH.jpg' />", "<img src='images/picF.jpg' />", "<img src='images/picA.jpg' />", "<img src='images/picG.jpg' />"],
		["<img src='images/picB.jpg' />", "<img src='images/picD.jpg' />", "<img src='images/picH.jpg' />", "<img src='images/picB.jpg' />"],
		["<img src='images/picA.jpg' />", "<img src='images/picF.jpg' />", "<img src='images/picC.jpg' />", "<img src='images/picG.jpg' />"]);
function getImage(x)
{
	n = x.split(".");
	document.getElementById(x).innerHTML = picArray[n[1]][n[2]];
	turnCount++;
		if (turnCount == 1 || turnCount % 2 == 1)
		{
			firstCellId = x;
			firstCell = picArray[n[1]][n[2]];
		}
		else
		{
			secondCellId = x;
			secondCell = picArray[n[1]][n[2]];
			compareThem();
		}
}

function compareThem()
{
	if (firstCell != secondCell)
	{
		if (turnCount < 30)
			{
				alert("Try again! You have " + ((30 - turnCount) / 2) + " turns left."); 
				document.getElementById(firstCellId).innerHTML = "<input type='image' src = 'images/hidden.jpg' onclick = 'getImage(\"" + firstCellId + "\")' />";
				document.getElementById(secondCellId).innerHTML = "<input type='image' src = 'images/hidden.jpg' onclick = 'getImage(\"" + secondCellId + "\")' />";
			}
			else
			{
				alert("Game Over! Better try again.")
				reloadPage();
			}	
	}
	else
	{
		matchCount++;
		if (matchCount > 0 && matchCount < 8)
			alert("You found a match! Look for more. You have " + ((30-turnCount) / 2) + " turns left.");
		else
		{
			var endIt = document.createElement("H3");
			var endMessage = document.createTextNode("Congratulations! You won!");
			endIt.appendChild(endMessage);
			document.getElementById("the_end").appendChild(endIt);
			
			var restartIt = document.createElement("BUTTON");
			restartIt.setAttribute("onclick","reloadPage();");
			var restartButton = document.createTextNode("Play Again");
			restartIt.appendChild(restartButton);
			document.getElementById("restart").appendChild(restartIt);
		}
	}
}

function reloadPage()
{
	window.location = location.href;
}
</script>
</head>
<body>
<div id="container">
	<h1 id="logo"><em>Greg's Game of Concentration</em></h1>
	<p>&nbsp;</p>
<div id="nav">
  <p><a href="index.html">Home</a>
  <a href="greg.html">About Greg</a>
  <a href="play_games.html">Play a Game</a>
  <a href="signin.html">Sign In</a>
  <a href="contact.html">Contact Us</a></p>
  <a href="greg_aboutyou.html">Tell Greg About You</a>
</div>
<div id="content">
		<h2>How good is your memory?</h2>
		<p>Click on a square to reveal the image beneath. Find 8 matching pairs in 15 tries to win the game.</p>
<table width = "60%" align = "center" style="text-align:center;">
	<tr>
		<td id = "cell.0.0"><input type="image" src = "images/hidden.jpg" onclick = "getImage('cell.0.0')" /></td>
		<td id = "cell.0.1"><input type="image" src = "images/hidden.jpg" onclick = "getImage('cell.0.1')" /></td>
		<td id = "cell.0.2"><input type="image" src = "images/hidden.jpg" onclick = "getImage('cell.0.2')" /></td>
		<td id = "cell.0.3"><input type="image" src = "images/hidden.jpg" onclick = "getImage('cell.0.3')" /></td>
	</tr>
	<tr>
		<td id = "cell.1.0"><input type="image" src = "images/hidden.jpg" onclick = "getImage('cell.1.0')" /></td>
		<td id = "cell.1.1"><input type="image" src = "images/hidden.jpg" onclick = "getImage('cell.1.1')" /></td>
		<td id = "cell.1.2"><input type="image" src = "images/hidden.jpg" onclick = "getImage('cell.1.2')" /></td>
		<td id = "cell.1.3"><input type="image" src = "images/hidden.jpg" onclick = "getImage('cell.1.3')" /></td>
	</tr>
	<tr>
		<td id = "cell.2.0"><input type="image" src = "images/hidden.jpg" onclick = "getImage('cell.2.0')" /></td>
		<td id = "cell.2.1"><input type="image" src = "images/hidden.jpg" onclick = "getImage('cell.2.1')" /></td>
		<td id = "cell.2.2"><input type="image" src = "images/hidden.jpg" onclick = "getImage('cell.2.2')" /></td>
		<td id = "cell.2.3"><input type="image" src = "images/hidden.jpg" onclick = "getImage('cell.2.3')" /></td>
	</tr>
	<tr>
		<td id = "cell.3.0"><input type="image" src = "images/hidden.jpg" onclick = "getImage('cell.3.0')" /></td>
		<td id = "cell.3.1"><input type="image" src = "images/hidden.jpg" onclick = "getImage('cell.3.1')" /></td>
		<td id = "cell.3.2"><input type="image" src = "images/hidden.jpg" onclick = "getImage('cell.3.2')" /></td>
		<td id = "cell.3.3"><input type="image" src = "images/hidden.jpg" onclick = "getImage('cell.3.3')" /></td>
	</tr>
</table>
	<div id = "the_end">&nbsp;</div>
	<div id = "restart" align = "center">&nbsp;</div>
</div>
    <div id="footer">Copyright &copy; 2016 Greg's Gambits<br>
      <a href="mailto:matthew@metzger.com">matthew@metzger.com</a>
    </div>
  </div>
</body>
</html>